<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Portal - Charity Intelligence</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/admin.css">
</head>

<body>

    <!-- Login View -->
    <div class="container" id="loginView">
        <div class="card">
            <h1><span class="material-icons-round">admin_panel_settings</span> Admin Portal</h1>
            <p style="color: var(--md-sys-color-secondary); font-size: 14px;">
                Sign in to manage the Global Charity Intelligence Platform database.
            </p>

            <div class="input-group">
                <label>PASSWORD</label>
                <input type="password" id="passwordInput" placeholder="Enter admin code">
            </div>

            <button class="btn" onclick="attemptLogin()">
                Access Dashboard
                <span class="material-icons-round">arrow_forward</span>
            </button>
            <div id="loginMessage" class="status-message"></div>

            <button class="btn btn-outlined" onclick="window.location.href='index.html'">
                Return to Site
            </button>
        </div>
    </div>

    <!-- Dashboard View -->
    <div class="container hidden" id="dashboardView" style="max-width: 800px;">
        <div class="card">
            <div class="dashboard-header">
                <h1><span class="material-icons-round">dashboard</span> Admin Dashboard</h1>
                <button class="btn btn-outlined" onclick="logout()" style="width: auto;">
                    Logout
                </button>
            </div>

            <div class="stat-card">
                <div class="stat-value" id="charityCount">0</div>
                <div class="stat-label">Total Charities in Database</div>
            </div>

            <div style="font-size: 14px; color: var(--md-sys-color-secondary);">
                <strong>System Status:</strong> <span id="dbSource">Checking...</span>
            </div>

            <div class="tool-grid">
                <!-- Update Tool -->
                <div class="tool-card" onclick="document.getElementById('fileUpload').click()">
                    <span class="material-icons-round"
                        style="font-size: 32px; color: var(--md-sys-color-primary);">upload_file</span>
                    <div>
                        <strong>Update Data</strong><br>
                        <span style="font-size: 12px; color: var(--md-sys-color-secondary);">Upload new JSON file</span>
                    </div>
                </div>
                <input type="file" id="fileUpload" accept=".json" style="display:none"
                    onchange="handleFileUpload(this)">

                <!-- Reset Tool -->
                <div class="tool-card" onclick="resetDatabase()">
                    <span class="material-icons-round"
                        style="font-size: 32px; color: var(--md-sys-color-error);">restore</span>
                    <div>
                        <strong>Reset Database</strong><br>
                        <span style="font-size: 12px; color: var(--md-sys-color-secondary);">Clear local
                            overrides</span>
                    </div>
                </div>
            </div>

            <div id="actionMessage" class="status-message" style="margin-top: 10px;"></div>

        </div>
    </div>

    <script src="assets/js/admin.js"></script>
</body>

</html>