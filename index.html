<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Charity Intelligence | Smart Matching Platform</title>

    <!-- Fonts & Icons -->
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Product+Sans:wght@400;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>

    <div class="app-layout">

        <header>
            <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                <div class="logo-area">
                    <span class="material-icons-round"
                        style="color: var(--md-sys-color-primary); font-size: 40px;">psychology</span>
                    <h1>CharityAI</h1>
                </div>
                <a href="sources.html"
                    style="text-decoration: none; color: var(--md-sys-color-primary); font-size: 14px; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                    <span class="material-icons-round" style="font-size: 18px;">gavel</span>
                    Protocol
                </a>
            </div>
            <p class="subtitle">Intelligent donation matching engine</p>
        </header>

        <!-- Loading State -->
        <div id="loadingState" class="loading-container">
            <div class="spinner"></div>
            <p>Initializing AI Models...</p>
        </div>

        <!-- Input Form -->
        <div id="inputCard" class="card hidden">
            <h2>Find Your Match</h2>

            <div class="input-group">
                <div class="input-wrapper">
                    <label>YOUR NAME</label>
                    <input type="text" id="userName" placeholder="e.g. Alex" />
                </div>
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <label>TARGET REGION</label>
                    <select id="userLocation">
                        <option value="India">India</option>
                        <option value="USA">USA</option>
                        <option value="UK">UK</option>
                        <option value="Canada">Canada</option>
                        <option value="Australia">Australia</option>
                        <option value="Germany">Germany</option>
                        <option value="Kenya">Kenya</option>
                        <option value="South Africa">South Africa</option>
                        <option value="Brazil">Brazil</option>
                        <option value="France">France</option>
                    </select>
                </div>
            </div>

            <div class="input-group">
                <div class="input-wrapper">
                    <label>CAUSE PREFERENCE</label>
                    <select id="userCause">
                        <option value="Health">Health & Medical</option>
                        <option value="Education">Education & Literacy</option>
                        <option value="Poverty">Poverty Alleviation</option>
                        <option value="Children">Child Welfare</option>
                        <option value="Environment">Environment & Conservation</option>
                        <option value="Nutrition">Hunger & Nutrition</option>
                        <option value="Water">Clean Water</option>
                        <option value="Medical Aid">Emergency Medical Aid</option>
                    </select>
                </div>
            </div>

            <button class="btn-primary" onclick="runMatch()">
                <span class="material-icons-round">smart_toy</span>
                Generate Analysis
            </button>

            <div style="margin-top: 24px; text-align: center;">
                <button onclick="toggleAdvancedMode()" class="btn-secondary-link">
                    <span class="material-icons-round" style="font-size: 18px;">psychology</span>
                    Advanced AI Cortex Analysis
                </button>
            </div>
        </div>

        <!-- AI Donor DNA Profile (Survey) -->
        <div id="aiDNAProfile" class="card hidden">
            <div class="ai-badge-header">
                <span class="material-icons-round">biotech</span>
                AI DNA PROFILING
            </div>
            <h2>Donor Persona Assessment</h2>
            <p style="font-size: 14px; color: var(--md-sys-color-secondary); margin-bottom: 24px;">Our AI Cortex engine will analyze your philanthropic values to generate a unique Donor DNA signature.</p>

            <div id="dnaQuestionContainer">
                <!-- Questions will be injected here via JS -->
                 <div class="dna-question active">
                    <p class="question-text">When crisis strikes, what is your primary concern?</p>
                    <div class="option-list">
                        <button class="option-btn" onclick="selectDNAOption('speed')">Immediate Speed of Aid</button>
                        <button class="option-btn" onclick="selectDNAOption('systemic')">Long-term Systemic Change</button>
                        <button class="option-btn" onclick="selectDNAOption('scaling')">Scalability of Infrastructure</button>
                    </div>
                 </div>
            </div>

            <div class="dna-progress">
                <div id="dnaProgressBar" class="dna-progress-fill" style="width: 33%;"></div>
            </div>
        </div>

        <!-- AI Processing State -->
        <div id="processingState" class="loading-container hidden">
            <div class="spinner"></div>
            <p>Analyzing donor personality & matching mission-critical datasets...</p>
            <p style="font-size: 12px; color: var(--md-sys-color-secondary); margin-top: 8px;">Deduplicating occurrences
                & verifying trust vectors...
                against global database</p>
        </div>

        <!-- Results View -->
        <div id="resultsView" class="hidden">
            <div style="margin-bottom: 24px; display: flex; align-items: center; justify-content: space-between;">
                <h2 style="font-family: 'Product Sans'; font-size: 20px;">Top Recommendations</h2>
                <button onclick="resetApp()"
                    style="background:none; border:none; color: var(--md-sys-color-primary); font-weight: 500; cursor: pointer;">Start
                    Over</button>
            </div>

            <div id="resultsList"></div>
        </div>

    </div>

    <!-- Admin Floating Button -->
    <a href="admin.html" class="admin-trigger" title="Admin Portal">
        <span class="material-icons-round">admin_panel_settings</span>
    </a>

    <!-- AI Chat Widget UI -->
    <button class="ai-chat-btn" onclick="toggleChat()" title="Ask AI Assistant">
        <span class="material-icons-round">smart_toy</span>
    </button>

    <div id="chatWindow" class="chat-window hidden">
        <div class="chat-header">
            <h3><span class="material-icons-round" style="color:#4285F4;">psychology</span> CharityAI Assistant</h3>
            <button onclick="toggleChat()" style="background:none; border:none; cursor:pointer; color:#747775;"><span
                    class="material-icons-round">close</span></button>
        </div>
        <div id="chatMessages" class="chat-messages">
            <div class="message bot">Welcome to the CharityAI Intelligence Hub. I have analyzed 264 verified global charities. You can ask me about financial efficiency, program impact, or click on a charity card to start a context-aware session. How can I help you today?</div>
        </div>
        <div class="chat-input-area">
            <input type="text" id="chatInput" class="chat-input" placeholder="Ask anything..."
                onkeypress="handleChatKey(event)">
            <button class="chat-send-btn" onclick="sendChatMessage()">
                <span class="material-icons-round">send</span>
            </button>
        </div>
    </div>

    <!-- Load External Data -->
    <script src="assets/js/data.js"></script>
    <script src="assets/js/app.js"></script>
</body>

</html>